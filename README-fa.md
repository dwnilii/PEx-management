# پنل مدیریت PAC-Management

این پروژه یک پنل مدیریت قدرتمند و جامع تحت وب است که با استفاده از Next.js، TypeScript و TailwindCSS ساخته شده است. هدف اصلی این پنل، ارائه یک راه‌حل مرکزی برای ایجاد، مدیریت و ارائه فایل‌های PAC (پیکربندی خودکار پروکسی) برای واحدهای سازمانی (OU) مختلف است.

[برای مشاهده نسخه انگلیسی اینجا کلیک کنید (Click here for English version)](./README.md)

### ✨ ویژگی‌های کلیدی

-   **مدیریت واحدهای سازمانی (OU):** شبکه خود را به گروه‌های مختلف (OU) تقسیم کرده و برای هر کدام قوانین پروکسی مشخصی تعریف کنید.
-   **مدیریت پروکسی:** به راحتی سرورهای پروکسی مختلف (HTTP, HTTPS, SOCKS4, SOCKS5) که در فایل‌های PAC استفاده می‌شوند را تعریف و مدیریت کنید.
-   **تولید قوانین پیشرفته PAC:** قوانین پیچیده‌ای برای هدایت ترافیک کاربران تعریف کنید. برای هر OU، شما می‌توانید:
    -   **تمام ترافیک را پروکسی کنید** و لیستی از دامنه‌ها را برای **عبور مستقیم (Bypass)** تعریف نمایید.
    -   **برای تمام ترافیک اتصال مستقیم** داشته باشید و لیستی از دامنه‌ها را برای هدایت از طریق **پروکسی** تعریف کنید.
-   **ایجاد خودکار فایل PAC:** با ایجاد یا به‌روزرسانی یک OU، سیستم به طور خودکار فایل `.pac` مربوطه را روی سرور ایجاد یا اصلاح می‌کند.
-   **استقرار متمرکز:** فایل‌های PAC به صورت ساختاریافته روی سرور ذخیره می‌شوند (مثلاً در `/var/www/html/pac/OU_NAME/OU_NAME.pac`) که به شما امکان می‌دهد به راحتی مرورگر کاربران خود را به URL پیکربندی صحیح هدایت کنید.
-   **رابط کاربری مدرن و واکنش‌گرا:** با استفاده از ShadCN UI و TailwindCSS برای بهترین تجربه کاربری طراحی شده است.

### 🚀 نصب خودکار (توصیه شده)

برای نصب این پنل روی سرور اوبونتو یا دبیان خود، کافی است دستور زیر را اجرا کنید. این اسکریپت به طور خودکار تمام وابستگی‌ها را نصب کرده، پروژه را پیکربندی و با استفاده از PM2 اجرا می‌کند.

```bash
curl -sL https://raw.githubusercontent.com/dwnilii/PAC-Management/main/install.sh | bash
```

پس از نصب، می‌توانید از رابط کاربری مدیریت (`./pac-ui.sh`) برای پیکربندی خودکار Nginx استفاده کنید تا فایل‌های PAC تولید شده از طریق یک URL (مانند `http://your-server-ip/pac/OU_NAME/OU_NAME.pac`) قابل دسترسی باشند.

### 🛠️ نصب دستی

اگر ترجیح می‌دهید برنامه را به صورت مرحله به مرحله نصب کنید، دستورالعمل‌های زیر را دنبال کنید.

**پیش‌نیازها:**
-   Node.js (نسخه ۱۸ یا بالاتر)
-   npm
-   git
-   PM2 (`npm install pm2 -g`)

**۱. کلون کردن ریپازیتوری**
```bash
git clone https://github.com/dwnilii/PAC-Management.git
cd PAC-Management
```

**۲. نصب وابستگی‌ها**
```bash
npm install
```

**۳. ایجاد فایل محیطی (Environment)**
یک فایل به نام `.env` در ریشه پروژه ایجاد کرده و اطلاعات ورود مدیر را در آن وارد کنید.
```bash
# می‌توانید از 'nano .env' یا هر ویرایشگر متن دیگری استفاده کنید
nano .env
```
محتوای زیر را به فایل اضافه کنید:
```env
ADMIN_USERNAME="your_admin_username"
ADMIN_PASSWORD="your_secure_password"
```

**۴. بیلد کردن برنامه**
برنامه Next.js را برای حالت پروداکشن کامپایل کنید.
```bash
npm run build
```

**۵. اجرا با PM2**
توصیه می‌کنیم از PM2 برای اجرای مداوم برنامه استفاده کنید.
```bash
# اجرای برنامه
pm2 start npm --name "pac-management" -- start

# ذخیره لیست فرآیندها برای اجرای مجدد پس از ری‌استارت سرور
pm2 save

# اختیاری: پیکربندی PM2 برای اجرا در زمان بوت شدن سیستم
pm2 startup
```

پنل شما اکنون باید روی آدرس `http://<your_server_ip>:3000` در حال اجرا باشد.
